<!-- ================= FOOTER (MODERN, PREMIUM WATER RIPPLE + LIVE GRADIENT) ================= -->
<footer class="relative mt-auto bg-gradient-to-br from-indigo-950 via-slate-900 to-blue-950 text-white/90 shadow-inner">
  <div class="pointer-events-none absolute -top-px inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
    <!-- Row 1 -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
      <!-- Brand -->
      <div class="md:col-span-4">
        <a href="{{ url_for('home') }}" class="flex items-center gap-3 group">
          <img alt="PersonFinder logo" class="w-10 h-10 rounded-xl shadow-lg ring-1 ring-white/10"
               src="{{ url_for('static', filename='images/elderly.jpeg') }}" />
          <div>
            <div class="animate-gradient text-lg sm:text-xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
              PersonFinder
            </div>
            <p class="text-xs text-white/70 group-hover:text-white/80 transition">Reunite Loved Ones</p>
          </div>
        </a>
        <p class="mt-3 text-sm text-white/70 leading-relaxed">
          Empowering communities through AI-driven identity restoration and compassionate technology.
        </p>
      </div>

      <!-- Navigation (4 cols so Admin sits beside Legal on desktop; stacks on mobile) -->
      <nav class="md:col-span-5" aria-label="Footer navigation">
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
          <!-- Explore -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="compass" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Explore</h3>
            </div>
            <ul class="space-y-2">
              <li><a href="{{ url_for('home') }}" class="footer-link-adv"><span>Home</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('register') }}" class="footer-link-adv"><span>Register</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('search') }}" class="footer-link-adv"><span>Search</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
            </ul>
          </div>

          <!-- Project -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="layout-dashboard" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Project</h3>
            </div>
            <ul class="space-y-2">
              <li><a href="{{ url_for('developers') }}" class="footer-link-adv"><span>Developers</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('donate_page') }}" class="footer-link-adv"><span>Donate</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('about') }}" class="footer-link-adv"><span>About App</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
            </ul>
          </div>

          <!-- Legal -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="scale" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Legal</h3>
            </div>
            <ul class="space-y-2">
              <li>
                <a href="{{ url_for('privacy_policy') }}" class="footer-link-adv" aria-label="Read our Privacy Policy">
                  <span>Privacy Policy</span>
                  <i data-lucide="chevron-right" class="link-arrow"></i>
                </a>
              </li>
              <li>
                <a href="{{ url_for('terms') }}" class="footer-link-adv" aria-label="Read our Terms of Service">
                  <span>Terms of Service</span>
                  <i data-lucide="chevron-right" class="link-arrow"></i>
                </a>
              </li>
            </ul>
          </div>

          <!-- Admin (modern CTA beside Legal) -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="shield" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Admin</h3>
            </div>

            <!-- Uniform card height via min-h and flex -->
            <div class="admin-card relative rounded-2xl p-3.5 bg-white/[0.04] border border-white/10 overflow-hidden flex flex-col min-h-[112px]">
              <div class="absolute -inset-1 opacity-30 blur-2xl bg-gradient-to-tr from-cyan-500/10 via-blue-500/10 to-indigo-500/10 pointer-events-none"></div>

              <div class="relative flex items-center justify-between gap-3">
                <div class="flex items-center gap-2 text-white/80">
                  <i data-lucide="lock" class="w-4 h-4"></i>
                  <span class="text-[12.5px]">Secure Access</span>
                </div>

                <!-- The href will be set to the SAME URL as the header's Admin link (auto-detected by script below) -->
                <a id="adminCta"
                   class="admin-cta inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border text-[12.5px] whitespace-nowrap"
                   href="#"
                   aria-label="Open Admin Login"
                   data-fallback="/admin">
                  <i data-lucide="log-in" class="w-4 h-4"></i>
                  <span>Login</span>
                </a>
              </div>

              <p class="relative mt-2 text-[11.5px] text-white/60 leading-snug">Restricted area for authorized personnel.</p>
            </div>
          </div>
          <!-- /Admin -->
        </div>
      </nav>

      <!-- Mission -->
      <section class="md:col-span-3">
        <div class="relative rounded-2xl p-4 bg-white/[0.04] border border-white/10 overflow-hidden h-full">
          <div class="absolute -inset-1 opacity-40 blur-2xl bg-gradient-to-tr from-blue-500/10 via-purple-500/10 to-pink-500/10 pointer-events-none"></div>
          <div class="relative">
            <h3 class="text-sm font-semibold text-white/90 flex items-center gap-2">
              <i data-lucide="sparkles" class="w-4 h-4 text-white/80"></i>
              Driven by Purpose
            </h3>
            <p class="mt-2 text-[13px] leading-relaxed text-white/70">
              Every search matters. We design for dignity, accuracy, and speed — because a timely match can change a life.
            </p>
            <div class="mt-3 flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-600/15 text-blue-200 border border-blue-500/30 text-[11px]">
                <i data-lucide="clock" class="w-3.5 h-3.5"></i> Real-time checks
              </span>
              <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-violet-600/15 text-violet-200 border border-violet-500/30 text-[11px]">
                <i data-lucide="eye" class="w-3.5 h-3.5"></i> Bias-aware UX
              </span>
            </div>
            <p class="mt-3 text-xs text-white/50">
              Version <span class="text-white/80">v{{ app_version }}</span> • © {{ current_year }} PersonFinder. All rights reserved.
            </p>
          </div>
        </div>
      </section>
    </div>

    <!-- Row 2 -->
    <div class="mt-8 pt-6 border-t border-white/10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-xs text-white/60">
      <!-- Left: tagline + DESKTOP legal under it -->
      <div class="w-full sm:w-auto">
        <p class="text-center sm:text-left">
          Built for hope, trust, and reconnection. <span class="text-white/75">#HumanFirstAI</span>
        </p>
        <!-- Desktop-only legal directly under the tagline on the LEFT -->
        <nav aria-label="Legal links (desktop under tagline)" class="hidden sm:block mt-2">
          <ul class="flex items-center gap-3">
            <li><a href="{{ url_for('privacy_policy') }}" class="footer-legal-link">Privacy Policy</a></li>
            <li class="opacity-50">•</li>
            <li><a href="{{ url_for('terms') }}" class="footer-legal-link">Terms of Service</a></li>
          </ul>
        </nav>
      </div>

      <!-- Right: status badges -->
      <div class="flex items-center gap-3 flex-wrap justify-center">
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-blue-600/20 text-blue-300 border border-blue-500/30">
          <i data-lucide="shield-check" class="w-3.5 h-3.5"></i> Secure Network
        </span>
        <span class="badge-ripple-emerald inline-flex items-center gap-1.5 pl-2 pr-2.5 py-1 rounded-full bg-emerald-600/20 text-emerald-300 border border-emerald-500/30 overflow-hidden">
          <span class="inline-block w-1.5 h-1.5 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 animate-liveDotWater"></span>
          Operational
        </span>
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-purple-600/20 text-purple-300 border border-purple-500/30">
          <i data-lucide="cpu" class="w-3.5 h-3.5"></i> AI Verified
        </span>
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-pink-600/20 text-pink-300 border border-pink-500/30">
          <i data-lucide="heart-handshake" class="w-3.5 h-3.5"></i> Human-First Design
        </span>
      </div>
    </div>

    <!-- Mobile-only compact legal (keeps easy access on phones, hidden on desktop) -->
    <div class="mt-3 sm:hidden flex items-center justify-center gap-2 text-[11.5px] text-white/60">
      <nav aria-label="Legal links (mobile compact)">
        <ul class="flex flex-wrap items-center gap-3">
          <li><a href="{{ url_for('privacy_policy') }}" class="footer-legal-link">Privacy Policy</a></li>
          <li class="opacity-50">•</li>
          <li><a href="{{ url_for('terms') }}" class="footer-legal-link">Terms of Service</a></li>
        </ul>
      </nav>
    </div>

    <span class="sr-only">© {{ current_year }} PersonFinder. All rights reserved.</span>
  </div>

  <!-- Back to top (subtle, unobtrusive) -->
  <button id="backToTop"
          class="back-to-top fixed bottom-5 right-5 sm:bottom-6 sm:right-6 opacity-0 pointer-events-none transition-all duration-300"
          aria-label="Back to top"
          type="button">
    <span class="sr-only">Back to top</span>
    <div class="btn-surface">
      <i data-lucide="arrow-up" class="w-4.5 h-4.5"></i>
    </div>
  </button>
</footer>

<!-- ============== SCRIPTS ============== -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  // Initialize icons
  if (window.lucide) lucide.createIcons();

  // Sync Admin button href with the SAME link used in the header (or fallback to /admin).
  (function syncAdminHref() {
    const adminBtn = document.getElementById('adminCta');
    if (!adminBtn) return;

    const fallback = adminBtn.getAttribute('data-fallback') || '/admin';
    let headerAdmin =
      document.querySelector('[data-admin-link]') ||
      Array.from(document.querySelectorAll('header a, nav a')).find(a => /admin/i.test((a.textContent || '').trim())) ||
      document.querySelector('header a[href*="/admin"], nav a[href*="/admin"]');

    const href = headerAdmin && headerAdmin.getAttribute('href') ? headerAdmin.getAttribute('href') : fallback;
    adminBtn.setAttribute('href', href);
  })();

  // Back-to-top behavior (smooth, respects reduced motion)
  (function () {
    const btn = document.getElementById('backToTop');
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function setVisible(v) {
      if (!btn) return;
      if (v) {
        btn.classList.add('show');
        btn.classList.remove('hide');
        btn.style.pointerEvents = 'auto';
      } else {
        btn.classList.add('hide');
        btn.classList.remove('show');
        btn.style.pointerEvents = 'none';
      }
    }

    function onScroll() {
      const y = window.scrollY || document.documentElement.scrollTop;
      setVisible(y > 300);
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('load', onScroll);

    if (btn) {
      btn.addEventListener('click', function () {
        if (prefersReduced) {
          window.scrollTo(0, 0);
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    }
  })();
</script>

<!-- ============== FOOTER STYLES ============== -->
<style>
/* Live gradient animation */
@keyframes gradient-move {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.animate-gradient { background-size:200% 200%; animation:gradient-move 6s ease infinite; }

/* Footer links */
.footer-link-adv {
  display:flex; align-items:center; justify-content:space-between;
  gap:.75rem; padding:.35rem .25rem; position:relative;
  color:rgba(255,255,255,.84); font-size:0.9375rem;
  transition:color .2s ease, transform .2s ease;
}
.footer-link-adv::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  height:1px; transform:scaleX(0); transform-origin:left;
  background:linear-gradient(90deg, rgba(96,165,250,.9), rgba(192,132,252,.9), rgba(244,114,182,.9));
  transition:transform .28s cubic-bezier(.22,1,.36,1);
}
.footer-link-adv:hover { color:#fff; transform:translateY(-1px); }
.footer-link-adv:hover::after { transform:scaleX(1); }
.footer-link-adv .link-arrow {
  width:18px; height:18px; opacity:.8; transform:translateX(-2px);
  transition:transform .28s cubic-bezier(.22,1,.36,1), opacity .2s ease;
}
.footer-link-adv:hover .link-arrow { transform:translateX(2px); opacity:1; }

/* Live dot ripple */
@keyframes rippleCorePulse {
  0%,100%{transform:scale(1);opacity:1;filter:brightness(1);}
  50%{transform:scale(1.12);opacity:.95;filter:brightness(1.4);}
}
@keyframes rippleRing {
  0%{transform:translate(-50%,-50%)scale(0.9);opacity:.5;}
  60%{opacity:.2;}
  100%{transform:translate(-50%,-50%)scale(5.2);opacity:0;}
}
.animate-liveDotWater {
  position:relative;animation:rippleCorePulse 2s ease-in-out infinite;
  box-shadow:0 0 4px 1px rgba(16,185,129,.45);
}
.animate-liveDotWater::before,.animate-liveDotWater::after{
  content:"";position:absolute;left:50%;top:50%;
  width:100%;height:100%;border-radius:9999px;
  border:1px solid rgba(16,185,129,.45);
  transform:translate(-50%,-50%)scale(1);
  animation:rippleRing 2.4s ease-out infinite;pointer-events:none;
}
.animate-liveDotWater::after{animation-delay:1.2s;border-color:rgba(16,185,129,.3);}

/* Emerald badge ripple */
@keyframes badgeTintEmerald {
  0%{transform:translate(-50%,-50%)scale(0.6);opacity:0.35;}
  70%{opacity:0.12;}
  100%{transform:translate(-50%,-50%)scale(4.5);opacity:0;}
}
.badge-ripple-emerald{position:relative;isolation:isolate;}
.badge-ripple-emerald::before,.badge-ripple-emerald::after{
  content:"";position:absolute;left:50%;top:50%;
  width:160%;height:160%;border-radius:9999px;
  background:radial-gradient(closest-side,rgba(16,185,129,.35),rgba(16,185,129,0));
  transform:translate(-50%,-50%)scale(0.6);
  animation:badgeTintEmerald 2.4s ease-out infinite;pointer-events:none;z-index:0;
}
.badge-ripple-emerald::after{
  animation-delay:1.2s;
  background:radial-gradient(closest-side,rgba(16,185,129,.25),rgba(16,185,129,0));
}
.badge-ripple-emerald>*{position:relative;z-index:1;}

/* Compact legal links */
.footer-legal-link {
  position:relative; padding-bottom:2px; color:rgba(255,255,255,.75);
  transition:color .2s ease;
}
.footer-legal-link::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  height:1px; transform:scaleX(0); transform-origin:left;
  background:linear-gradient(90deg, rgba(96,165,250,.9), rgba(192,132,252,.9), rgba(244,114,182,.9));
  transition:transform .28s cubic-bezier(.22,1,.36,1); opacity:.9;
}
.footer-legal-link:hover { color:#fff; }
.footer-legal-link:hover::after { transform:scaleX(1); }

/* Admin CTA styling (glass + gradient ring) */
.admin-card { backdrop-filter: saturate(1.2) blur(0px); }
.admin-cta {
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border-color: rgba(255,255,255,.18);
  border-width: 1px;
  line-height: 1;
  box-shadow: 0 2px 8px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.06);
  position: relative;
  overflow: hidden;
}
.admin-cta::before {
  content: "";
  position: absolute; inset: -1px;
  border-radius: 9999px;
  padding: 1px;
  background: linear-gradient(90deg, rgba(34,211,238,.6), rgba(99,102,241,.6), rgba(139,92,246,.6));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity: .55;
}
.admin-cta:hover { transform: translateY(-1px); }
.admin-cta:hover::before { opacity: .85; }
.admin-cta i { opacity: .9; }

/* Back to Top button (subtle, never overshadows content) */
.back-to-top { z-index: 40; }
.back-to-top .btn-surface{
  display:inline-flex; align-items:center; justify-content:center;
  width:40px; height:40px; border-radius:9999px;
  backdrop-filter: blur(6px);
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 4px 18px rgba(0,0,0,.35);
}
.back-to-top i { stroke-width:2; color: rgba(255,255,255,.9); }
.back-to-top.show { opacity: 1 !important; transform: translateY(0) scale(1); }
.back-to-top.hide { opacity: 0 !important; transform: translateY(8px) scale(.98); }

/* Icons */
[class*="bg-"] i { stroke-width:1.8; }

/* Accessibility */
@media (prefers-reduced-motion: reduce){
  .animate-gradient,
  .animate-liveDotWater,
  .animate-liveDotWater::before,
  .animate-liveDotWater::after,
  .badge-ripple-emerald::before,
  .badge-ripple-emerald::after { animation:none !important; }
  .back-to-top { transition: none !important; }
}
</style>
<!-- ================= END FOOTER ================= -->
