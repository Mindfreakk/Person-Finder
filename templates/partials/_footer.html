<!-- ================= CLEAN PROFESSIONAL FOOTER WITH FEEDBACK + ROLES MODAL ================= -->
<footer class="relative mt-auto bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white/90 shadow-inner">
  <div class="pointer-events-none absolute -top-px inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-8 lg:py-10 space-y-6">

    <!-- Top layout: Feedback + Admin -->
    <div class="grid gap-6 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)] items-stretch">

      <!-- Feedback Card -->
      <aside class="w-full">
        <div class="rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/80 via-slate-900/60 to-slate-800/80 p-4 sm:p-5 shadow-lg shadow-black/30 relative overflow-hidden">

          <!-- Subtle glow -->
          <div class="pointer-events-none absolute -inset-0.5 rounded-3xl opacity-40"
               style="background: radial-gradient(circle at top left, rgba(56,189,248,0.35), transparent 60%); mix-blend-mode: screen;"></div>

          <div class="relative space-y-3">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h3 class="footer-heading mb-1.5 text-[1.1rem] font-bold flex items-center gap-2">
  <i data-lucide="message-circle-heart" class="w-5 h-5 text-pink-300"></i>
  We value your feedback
</h3>
                <p class="text-xs sm:text-sm text-white/75">
                  Share your experience with PersonFinder to help us improve usability, performance, and support.
                </p>
              </div>
              <div class="hidden sm:flex items-center justify-center w-9 h-9 rounded-full bg-cyan-400/10 border border-cyan-300/40">
                <i data-lucide="message-circle" class="w-4 h-4 text-cyan-200"></i>
              </div>
            </div>

            <!-- Feedback Form -->
            <form id="feedbackForm" class="relative mt-2 space-y-3">
              <div class="grid gap-3 sm:grid-cols-2">
                <!-- Name (optional) -->
                <div class="space-y-1.5">
                  <label for="feedbackName" class="block text-[0.72rem] font-medium text-slate-200/95 tracking-wide">
                    Your Name <span class="opacity-60">(optional)</span>
                  </label>
                  <input
                    id="feedbackName"
                    name="name"
                    type="text"
                    class="w-full rounded-xl border border-slate-600/70 bg-slate-950/60 px-3 py-2 text-xs sm:text-sm
                           text-slate-50 placeholder-slate-400/80 focus:outline-none focus:ring-[1.5px]
                           focus:ring-cyan-400 focus:border-cyan-400 transition"
                    placeholder="Enter your name"
                  />
                </div>

                <!-- Email (required) -->
                <div class="space-y-1.5">
                  <label for="feedbackEmail" class="block text-[0.72rem] font-medium text-slate-200/95 tracking-wide">
                    Email <span class="text-rose-300">*</span>
                  </label>
                  <input
                    id="feedbackEmail"
                    name="email"
                    type="email"
                    required
                    class="w-full rounded-xl border border-slate-600/70 bg-slate-950/60 px-3 py-2 text-xs sm:text-sm
                           text-slate-50 placeholder-slate-400/80 focus:outline-none focus:ring-[1.5px]
                           focus:ring-cyan-400 focus:border-cyan-400 transition"
                    placeholder="you@example.com"
                  />
                  <p id="feedbackEmailError" class="mt-1 text-[0.7rem] text-rose-300 hidden">
                    Please enter a valid email address.
                  </p>
                </div>
              </div>

              <!-- Rating -->
              <div class="space-y-1.5">
                <label for="feedbackRating" class="block text-[0.72rem] font-medium text-slate-200/95 tracking-wide">
                  How was your experience? <span class="text-rose-300">*</span>
                </label>
                <div class="grid gap-2 sm:grid-cols-[minmax(0,0.9fr)_minmax(0,1.1fr)]">
                  <div>
                    <select
                      id="feedbackRating"
                      name="rating"
                      required
                      class="w-full rounded-xl border border-slate-600/70 bg-slate-950/60 px-3 py-2 text-xs sm:text-sm
                             text-slate-50 focus:outline-none focus:ring-[1.5px] focus:ring-cyan-400
                             focus:border-cyan-400 transition"
                    >
                      <option value="">Select a rating</option>
                      <option value="1">⭐ – Very Poor</option>
                      <option value="2">⭐⭐ – Poor</option>
                      <option value="3">⭐⭐⭐ – Average</option>
                      <option value="4">⭐⭐⭐⭐ – Good</option>
                      <option value="5">⭐⭐⭐⭐⭐ – Excellent</option>
                    </select>
                    <p id="feedbackRatingError" class="mt-1 text-[0.7rem] text-rose-300 hidden">
                      Please select a rating.
                    </p>
                  </div>

                  <p class="text-[0.7rem] text-slate-300/80 flex items-center gap-1.5">
                    <i data-lucide="sparkles" class="w-3.5 h-3.5 text-amber-300/90"></i>
                    Honest feedback helps us prioritize fixes and new features.
                  </p>
                </div>
              </div>

              <!-- Message (required) -->
              <div class="space-y-1.5">
                <label for="feedbackMessage" class="block text-[0.72rem] font-medium text-slate-200/95 tracking-wide">
                  Feedback details <span class="text-rose-300">*</span>
                </label>
                <textarea
                  id="feedbackMessage"
                  name="message"
                  rows="3"
                  required
                  class="w-full rounded-xl border border-slate-600/70 bg-slate-950/60 px-3 py-2 text-xs sm:text-sm
                         text-slate-50 placeholder-slate-400/80 focus:outline-none focus:ring-[1.5px]
                         focus:ring-cyan-400 focus:border-cyan-400 transition resize-y"
                  placeholder="Tell us what worked well, and what could be improved…"
                ></textarea>
                <p id="feedbackMessageError" class="mt-1 text-[0.7rem] text-rose-300 hidden">
                  Please describe your experience.
                </p>
              </div>

              <!-- Submit + status -->
              <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mt-1">
                <button
                  type="submit"
                  class="inline-flex items-center justify-center px-4 py-2.5 rounded-full text-xs sm:text-sm font-semibold
                         bg-cyan-500 hover:bg-cyan-400 text-slate-950 shadow-md shadow-cyan-900/50
                         focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-950 focus:ring-cyan-400
                         active:scale-[0.97] transition gap-1.5"
                >
                  Submit Feedback
                  <i data-lucide="send" class="w-3.5 h-3.5"></i>
                </button>

                <div class="flex-1 min-h-[1.5rem] text-[0.7rem] space-y-1">
                  <p id="feedbackSuccess" class="text-emerald-300 hidden">
                    ✅ Thank you! Your feedback has been submitted.
                  </p>
                  <p id="feedbackError" class="text-rose-300 hidden">
                    ❌ Something went wrong. Please try again.
                  </p>
                </div>
              </div>
            </form>
          </div>
        </div>
      </aside>

      <!-- Admin Card -->
      <aside class="w-full">
        <div class="admin-card rounded-2xl border border-white/10 bg-gradient-to-br 
                    from-slate-900/80 via-slate-900/60 to-slate-800/80 
                    p-4 sm:p-5 shadow-lg shadow-black/30 h-full flex flex-col">

          <!-- Header -->
          <div class="flex items-start justify-between gap-3">
            <div>
              <h3 class="footer-heading mb-1.5 text-[1.1rem] font-bold flex items-center gap-2">
  <i data-lucide="shield-check" class="w-5 h-5 text-emerald-300"></i>
  Admin
</h3>
              <p class="text-xs sm:text-sm text-white/75">
                Log in to access administrative tools, user management, and system settings.
              </p>
            </div>

            <div class="hidden sm:flex items-center justify-center w-9 h-9 rounded-full 
                        bg-white/10 border border-white/15">
              <i data-lucide="shield" class="w-4 h-4 text-white/85"></i>
            </div>
          </div>

          <!-- Security Icons Row (centered & shimmering) -->
          <div class="mt-4 mb-4 flex justify-center pf-admin-icon-section">
            <div class="pf-admin-icon-row">
              <div class="pf-admin-icon shimmer-random">
                <i data-lucide="shield-check" class="w-5 h-5 text-emerald-300"></i>
              </div>
              <div class="pf-admin-icon shimmer-random">
                <i data-lucide="fingerprint" class="w-5 h-5 text-cyan-300"></i>
              </div>
              <div class="pf-admin-icon shimmer-random">
                <i data-lucide="key-round" class="w-5 h-5 text-blue-300"></i>
              </div>
              <div class="pf-admin-icon shimmer-random">
                <i data-lucide="lock" class="w-5 h-5 text-indigo-300"></i>
              </div>
            </div>
          </div>

          <!-- Buttons -->
          <div class="mt-auto flex flex-wrap gap-2">
            <a href="{{ url_for('login') }}"
               class="inline-flex items-center justify-center px-3.5 py-2 rounded-full text-xs font-medium 
                      bg-emerald-500 hover:bg-emerald-400 text-slate-950 shadow-md shadow-emerald-900/50 transition">
              Admin Login
              <i data-lucide="log-in" class="w-3.5 h-3.5 ml-1"></i>
            </a>

            <!-- note: using id + data attribute, either is fine -->
            <button id="pf-role-open"
                    type="button"
                    data-pf-role-open
                    class="inline-flex items-center justify-center px-3 py-2 rounded-full text-xs font-medium 
                           bg-white/5 hover:bg-white/10 border border-white/15 text-white/85 transition">
              Learn about roles
              <i data-lucide="info" class="w-3.5 h-3.5 ml-1"></i>
            </button>
          </div>
        </div>
      </aside>
    </div>

<!-- ================= ROLES MODAL (SUPER ADMIN / ADMIN / USER) ================= -->
<div id="pf-role-modal"
     class="fixed inset-0 z-[80] hidden opacity-0 pointer-events-none items-center justify-center">
  <!-- Backdrop -->
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" data-pf-role-backdrop data-pf-role-close></div>

  <!-- Modal Content -->
  <div class="relative w-full max-w-md mx-4 bg-slate-900/95 border border-white/10 rounded-2xl p-6 shadow-2xl shadow-black/50 overflow-hidden">
    <div class="absolute -inset-1 opacity-40 blur-2xl bg-gradient-to-tr from-blue-500/15 via-purple-500/15 to-pink-500/15 pointer-events-none"></div>

    <div class="relative">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-white flex items-center gap-2">
          <i data-lucide="badge-check" class="w-5 h-5 text-blue-300"></i>
          User Roles
        </h3>
        <button type="button"
                data-pf-role-close
                class="text-white/70 hover:text-white transition">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
      </div>

      <!-- Body -->
      <div class="space-y-3 text-sm leading-relaxed text-white/80">
        <p>
          <span class="font-semibold text-emerald-200">Super Admin:</span>
          Full system-wide control, including critical configuration, role assignment, and security policies.
        </p>
        <p>
          <span class="font-semibold text-blue-200">Admin:</span>
          Manages cases, reviews and approves reports, handles user accounts, and oversees day-to-day operations.
        </p>
        <p>
          <span class="font-semibold text-purple-200">User:</span>
          Can register missing persons, submit updates, and search the PersonFinder database.
        </p>
      </div>

      <!-- Footer -->
      <div class="mt-5 flex justify-end">
        <button type="button"
                data-pf-role-close
                class="px-3.5 py-2 rounded-full bg-white/10 hover:bg-white/20 text-white text-xs border border-white/15">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
<!-- ================= END ROLES MODAL ================= -->

<script>
  // Simple, robust wiring for the Roles modal (no DOMContentLoaded issues)
  (function () {
    const openBtn = document.getElementById('pf-role-open');
    const modal = document.getElementById('pf-role-modal');
    if (!openBtn || !modal) return;

    const closeEls = modal.querySelectorAll('[data-pf-role-close]');
    const backdrop = modal.querySelector('[data-pf-role-backdrop]') || modal;

    function hydrateIcons() {
      if (window.pfRefreshIcons) {
        window.pfRefreshIcons();
      } else if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
      }
    }

    function openModal() {
      modal.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
      modal.classList.add('flex');              // center on mobile & desktop
      modal.setAttribute('aria-hidden', 'false');
      hydrateIcons();
    }

    function closeModal() {
      modal.classList.add('hidden', 'opacity-0', 'pointer-events-none');
      modal.classList.remove('flex');
      modal.setAttribute('aria-hidden', 'true');
    }

    openBtn.addEventListener('click', openModal);
    closeEls.forEach(el => el.addEventListener('click', closeModal));

    if (backdrop) {
      backdrop.addEventListener('click', function (e) {
        if (e.target === backdrop) closeModal();
      });
    }

    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') closeModal();
    });
  })();
</script>


<!-- ================= DESKTOP WATER WAVE DIVIDER (ABOVE FOOTER) ================= -->
<div class="footer-wave-divider">
  <svg
    class="w-full h-full"
    viewBox="0 0 1440 320"
    preserveAspectRatio="none"
    aria-hidden="true"
    focusable="false"
  >
    <defs>
      <!-- Gradient for subtle depth -->
      <linearGradient id="footerDividerGradient" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#ffffff" stop-opacity="0.9" />
        <stop offset="100%" stop-color="#f0f0f0" stop-opacity="0.1" />
      </linearGradient>

      <!-- Soft drop shadow -->
      <filter id="footerDividerShadow" x="-50%" y="-50%" width="200%" height="200%">
        <feDropShadow
          dx="0"
          dy="4"
          stdDeviation="6"
          flood-color="#000"
          flood-opacity="0.12"
        />
      </filter>
    </defs>

    <!-- Primary strong wave -->
    <path
      fill="url(#footerDividerGradient)"
      filter="url(#footerDividerShadow)"
      d="M0,120 L60,160 C120,200 240,280 360,260 C480,240 600,160 720,140 C840,120 960,200 1080,220 C1200,240 1320,200 1380,180 L1440,160 L1440,320 L0,320 Z"
    >
      <animate
        attributeName="d"
        dur="8s"
        repeatCount="indefinite"
        values="
          M0,120 L60,160 C120,200 240,280 360,260 C480,240 600,160 720,140 C840,120 960,200 1080,220 C1200,240 1320,200 1380,180 L1440,160 L1440,320 L0,320 Z;
          M0,100 L60,140 C120,180 240,260 360,240 C480,220 600,140 720,120 C840,100 960,180 1080,200 C1200,220 1320,180 1380,160 L1440,140 L1440,320 L0,320 Z;
          M0,120 L60,160 C120,200 240,280 360,260 C480,240 600,160 720,140 C840,120 960,200 1080,220 C1200,240 1320,200 1380,180 L1440,160 L1440,320 L0,320 Z
        "
      />
    </path>

    <!-- Secondary soft wave -->
    <path
      fill="url(#footerDividerGradient)"
      opacity="0.5"
      d="M0,130 L60,170 C120,210 240,290 360,270 C480,250 600,170 720,150 C840,130 960,210 1080,230 C1200,250 1320,210 1380,190 L1440,170 L1440,320 L0,320 Z"
    >
      <animate
        attributeName="d"
        dur="12s"
        repeatCount="indefinite"
        values="
          M0,130 L60,170 C120,210 240,290 360,270 C480,250 600,170 720,150 C840,130 960,210 1080,230 C1200,250 1320,210 1380,190 L1440,170 L1440,320 L0,320 Z;
          M0,110 L60,150 C120,190 240,270 360,250 C480,230 600,150 720,130 C840,110 960,190 1080,210 C1200,230 1320,190 1380,170 L1440,150 L1440,320 L0,320 Z;
          M0,130 L60,170 C120,210 240,290 360,270 C480,250 600,170 720,150 C840,130 960,210 1080,230 C1200,250 1320,210 1380,190 L1440,170 L1440,320 L0,320 Z
        "
      />
    </path>
  </svg>
</div>

<!-- ================= FOOTER (UNCHANGED MAIN BACKGROUND) ================= -->
<footer class="relative mt-auto bg-gradient-to-br from-indigo-950 via-slate-900 to-blue-950 text-white/90 shadow-inner">
  <div class="pointer-events-none absolute -top-px inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
    <!-- Row 1 -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
      <!-- Brand -->
      <div class="md:col-span-4">
        <a href="{{ url_for('home') }}" class="flex items-center gap-3 group">
          <img alt="PersonFinder logo" class="w-10 h-10 rounded-xl shadow-lg ring-1 ring-white/10"
               src="{{ url_for('static', filename='images/elderly.jpeg') }}" />
          <div>
            <div class="animate-gradient text-lg sm:text-xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
              PersonFinder
            </div>
            <p class="text-xs text-white/70 group-hover:text-white/80 transition">Reunite Loved Ones</p>
          </div>
        </a>
        <p class="mt-3 text-sm text-white/70 leading-relaxed">
          Empowering communities through AI-driven identity restoration and compassionate technology.
        </p>
      </div>

      <!-- Navigation (Explore + Project) -->
      <nav class="md:col-span-5" aria-label="Footer navigation">
        <div class="grid grid-cols-2 lg:grid-cols-2 gap-6">
          <!-- Explore -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="compass" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Explore</h3>
            </div>
            <ul class="space-y-2">
              <li><a href="{{ url_for('home') }}" class="footer-link-adv"><span>Home</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('register') }}" class="footer-link-adv"><span>Register</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('search') }}" class="footer-link-adv"><span>Search</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
            </ul>
          </div>

          <!-- Project -->
          <div class="h-full">
            <div class="inline-flex items-center gap-2 mb-3 px-2.5 py-1.5 rounded-full bg-white/5 border border-white/10">
              <i data-lucide="layout-dashboard" class="w-3.5 h-3.5 text-white/70"></i>
              <h3 class="text-[11px] font-semibold tracking-wider text-white/80 uppercase">Project</h3>
            </div>
            <ul class="space-y-2">
              <li><a href="{{ url_for('developers') }}" class="footer-link-adv"><span>Developers</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('donate_page') }}" class="footer-link-adv"><span>Donate</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
              <li><a href="{{ url_for('about') }}" class="footer-link-adv"><span>About App</span><i data-lucide="chevron-right" class="link-arrow"></i></a></li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Mission -->
      <section class="md:col-span-3">
        <div class="relative rounded-2xl p-4 bg-white/[0.04] border border-white/10 overflow-hidden h-full admin-card">
          <div class="absolute -inset-1 opacity-40 blur-2xl bg-gradient-to-tr from-blue-500/10 via-purple-500/10 to-pink-500/10 pointer-events-none"></div>
          <div class="relative">
            <h3 class="text-sm font-semibold text-white/90 flex items-center gap-2">
              <i data-lucide="sparkles" class="w-4 h-4 text-white/80"></i>
              Driven by Purpose
            </h3>
            <p class="mt-2 text-[13px] leading-relaxed text-white/70">
              Every search matters. We design for dignity, accuracy, and speed — because a timely match can change a life.
            </p>
            <div class="mt-3 flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-600/15 text-blue-200 border border-blue-500/30 text-[11px]">
                <i data-lucide="clock" class="w-3.5 h-3.5"></i> Real-time checks
              </span>
              <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-violet-600/15 text-violet-200 border border-violet-500/30 text-[11px]">
                <i data-lucide="eye" class="w-3.5 h-3.5"></i> Bias-aware UX
              </span>
            </div>
            <p class="mt-3 text-xs text-white/50">
              Version <span class="text-white/80">v{{ app_version }}</span> • © {{ current_year }} PersonFinder. All rights reserved.
            </p>
          </div>
        </div>
      </section>
    </div>

    <!-- Row 2 -->
    <div class="mt-8 pt-6 border-t border-white/10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-xs text-white/60">
      <!-- Left: tagline + Legal -->
      <div class="w-full sm:w-auto">
        <p class="text-center sm:text-left">
          Built for hope, trust, and reconnection. <span class="text-white/75">#HumanFirstAI</span>
        </p>
        <!-- Visible on mobile + desktop -->
        <nav aria-label="Legal links" class="mt-2">
          <ul class="flex flex-wrap items-center justify-center sm:justify-start gap-3">
            <li><a href="{{ url_for('privacy_policy') }}" class="footer-legal-link">Privacy Policy</a></li>
            <li class="opacity-50">•</li>
            <li><a href="{{ url_for('terms') }}" class="footer-legal-link">Terms of Service</a></li>
          </ul>
        </nav>
      </div>

      <!-- Right: status badges -->
      <div class="flex items-center gap-3 flex-wrap justify-center">
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-blue-600/20 text-blue-300 border border-blue-500/30">
          <i data-lucide="shield-check" class="w-3.5 h-3.5"></i> Secure Network
        </span>
        <span class="badge-ripple-emerald inline-flex items-center gap-1.5 pl-2 pr-2.5 py-1 rounded-full bg-emerald-600/20 text-emerald-300 border border-emerald-500/30 overflow-hidden">
          <span class="inline-block w-1.5 h-1.5 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 animate-liveDotWater"></span>
          Operational
        </span>
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-purple-600/20 text-purple-300 border border-purple-500/30">
          <i data-lucide="cpu" class="w-3.5 h-3.5"></i> AI Verified
        </span>
        <span class="inline-flex items-center gap-1.5 px-2 py-1 rounded-full bg-pink-600/20 text-pink-300 border border-pink-500/30">
          <i data-lucide="heart-handshake" class="w-3.5 h-3.5"></i> Human-First Design
        </span>
      </div>
    </div>
  </div>
</footer>

<!-- ============== SCRIPTS ============== -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  // Lucide icon bootstrap (footer, admin, feedback, modals, etc.)
  (function initLucide() {
    function hydrateIcons() {
      if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', hydrateIcons);
    } else {
      hydrateIcons();
    }

    // helper if you later inject HTML dynamically
    window.pfRefreshIcons = hydrateIcons;
  })();

  // Roles modal wiring (Admin "Learn about roles" button)
  document.addEventListener('DOMContentLoaded', function () {
    const openButtons = document.querySelectorAll('[data-pf-role-open], #pf-role-open');
    const modal = document.getElementById('pf-role-modal') || document.getElementById('pf-roles-modal');

    if (!openButtons.length || !modal) return;

    const closeButtons = modal.querySelectorAll('[data-pf-role-close], [data-modal-close]');
    const backdrop = modal.querySelector('[data-pf-role-backdrop]') || modal;

    function openModal() {
      modal.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
      modal.setAttribute('aria-hidden', 'false');
      if (window.pfRefreshIcons) window.pfRefreshIcons();
    }

    function closeModal() {
      modal.classList.add('hidden');
      modal.setAttribute('aria-hidden', 'true');
    }

    openButtons.forEach(btn => btn.addEventListener('click', openModal));
    closeButtons.forEach(btn => btn.addEventListener('click', closeModal));

    if (backdrop) {
      backdrop.addEventListener('click', function (e) {
        if (e.target === backdrop) closeModal();
      });
    }

    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') closeModal();
    });
  });

  // Sync Admin button href with the SAME link used in the header (or fallback to /admin).
  (function syncAdminHref() {
    const adminBtn = document.getElementById('adminCta');
    if (!adminBtn) return;

    const fallback = adminBtn.getAttribute('data-fallback') || '/admin';
    let headerAdmin =
      document.querySelector('[data-admin-link]') ||
      Array.from(document.querySelectorAll('header a, nav a')).find(a => /admin/i.test((a.textContent || '').trim())) ||
      document.querySelector('header a[href*="/admin"], nav a[href*="/admin"]');

    const href = headerAdmin && headerAdmin.getAttribute('href') ? headerAdmin.getAttribute('href') : fallback;
    adminBtn.setAttribute('href', href);
  })();

  // Back-to-top behavior (smooth, respects reduced motion)
  (function () {
    const btn = document.getElementById('backToTop');
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function setVisible(v) {
      if (!btn) return;
      if (v) {
        btn.classList.add('show');
        btn.classList.remove('hide');
        btn.style.pointerEvents = 'auto';
      } else {
        btn.classList.add('hide');
        btn.classList.remove('show');
        btn.style.pointerEvents = 'none';
      }
    }

    function onScroll() {
      const y = window.scrollY || document.documentElement.scrollTop;
      setVisible(y > 300);
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('load', onScroll);

    if (btn) {
      btn.addEventListener('click', function () {
        if (prefersReduced) {
          window.scrollTo(0, 0);
        } else {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    }
  })();
</script>

<!-- ============== STYLES (INCLUDING ICON LAYOUT & ANIMATIONS) ============== -->
<style>
/* Full-bleed wave above footer, footer stays on main background */
.footer-wave-divider {
  position: relative;
  width: 100vw;
  left: 50%;
  margin-left: -50vw;
  height: 110px;
  overflow: hidden;
  margin-top: -5px;
}

/* ---- Admin card icon section: center vertically on desktop ---- */
.pf-admin-icon-section {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

@media (min-width: 1024px) {
  .pf-admin-icon-section {
    flex: 1;
    display: flex !important;
    align-items: center;
    justify-content: center;
    margin-top: 0;
    margin-bottom: 0;
  }
}

/* Icon row layout (horizontal) */
.pf-admin-icon-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.9rem;
}

/* Base icon pill */
.pf-admin-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.6rem;
  height: 2.6rem;
  border-radius: 9999px;
  background: radial-gradient(circle at 30% 20%, rgba(148,163,184,.35), rgba(15,23,42,1));
  border: 1px solid rgba(148,163,184,0.7);
  box-shadow: 0 0 10px rgba(15,23,42,0.8);
  position: relative;
  overflow: hidden;
  animation: adminIconFloat 4s ease-in-out infinite, adminIconGlow 3.5s ease-in-out infinite;
}

/* Slightly larger on desktop */
@media (min-width: 1024px) {
  .pf-admin-icon {
    width: 3.1rem;
    height: 3.1rem;
  }
  .pf-admin-icon i {
    width: 1.5rem !important;
    height: 1.5rem !important;
  }
}

/* Stagger animation timings per icon */
.pf-admin-icon-row .pf-admin-icon:nth-child(1) {
  animation-delay: 0s, 0s;
}
.pf-admin-icon-row .pf-admin-icon:nth-child(2) {
  animation-delay: 0.12s, 0.12s;
}
.pf-admin-icon-row .pf-admin-icon:nth-child(3) {
  animation-delay: 0.24s, 0.24s;
}
.pf-admin-icon-row .pf-admin-icon:nth-child(4) {
  animation-delay: 0.36s, 0.36s;
}

/* Soft float animation */
@keyframes adminIconFloat {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-3px);
  }
}

/* Glow / pulse animation */
@keyframes adminIconGlow {
  0%, 100% {
    box-shadow: 0 0 10px rgba(56,189,248,0.35);
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 16px rgba(129,140,248,0.6);
    opacity: 0.95;
  }
}

/* Optional shimmer sweep using existing .shimmer-random class */
.shimmer-random::after {
  content: "";
  position: absolute;
  inset: -40%;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255,255,255,0.35) 45%,
    rgba(255,255,255,0.1) 55%,
    transparent 100%
  );
  transform: translateX(-130%);
  opacity: 0;
  pointer-events: none;
  animation: adminIconShimmer 4.2s ease-in-out infinite;
}

@keyframes adminIconShimmer {
  0%, 65% {
    transform: translateX(-130%);
    opacity: 0;
  }
  70% {
    opacity: 0.9;
  }
  85% {
    transform: translateX(130%);
    opacity: 0;
  }
  100% {
    transform: translateX(130%);
    opacity: 0;
  }
}

/* Live gradient animation */
@keyframes gradient-move {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.animate-gradient { background-size:200% 200%; animation:gradient-move 6s ease infinite; }

/* Footer links */
.footer-link-adv {
  display:flex; align-items:center; justify-content:space-between;
  gap:.75rem; padding:.35rem .25rem; position:relative;
  color:rgba(255,255,255,.84); font-size:0.9375rem;
  transition:color .2s ease, transform .2s ease;
}
.footer-link-adv::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  height:1px; transform:scaleX(0); transform-origin:left;
  background:linear-gradient(90deg, rgba(96,165,250,.9), rgba(192,132,252,.9), rgba(244,114,182,.9));
  transition:transform .28s cubic-bezier(.22,1,.36,1);
}
.footer-link-adv:hover { color:#fff; transform:translateY(-1px); }
.footer-link-adv:hover::after { transform:scaleX(1); }
.footer-link-adv .link-arrow {
  width:18px; height:18px; opacity:.8; transform:translateX(-2px);
  transition:transform .28s cubic-bezier(.22,1,.36,1), opacity .2s ease;
}
.footer-link-adv:hover .link-arrow { transform:translateX(2px); opacity:1; }

/* Live dot ripple */
@keyframes rippleCorePulse {
  0%,100%{transform:scale(1);opacity:1;filter:brightness(1);}
  50%{transform:scale(1.12);opacity:.95;filter:brightness(1.4);}
}
@keyframes rippleRing {
  0%{transform:translate(-50%,-50%)scale(0.9);opacity:.5;}
  60%{opacity:.2;}
  100%{transform:translate(-50%,-50%)scale(5.2);opacity:0;}
}
.animate-liveDotWater {
  position:relative;animation:rippleCorePulse 2s ease-in-out infinite;
  box-shadow:0 0 4px 1px rgba(16,185,129,.45);
}
.animate-liveDotWater::before,.animate-liveDotWater::after{
  content:"";position:absolute;left:50%;top:50%;
  width:100%;height:100%;border-radius:9999px;
  border:1px solid rgba(16,185,129,.45);
  transform:translate(-50%,-50%)scale(1);
  animation:rippleRing 2.4s ease-out infinite;pointer-events:none;
}
.animate-liveDotWater::after{animation-delay:1.2s;border-color:rgba(16,185,129,.3);}

/* Emerald badge ripple */
@keyframes badgeTintEmerald {
  0%{transform:translate(-50%,-50%)scale(0.6);opacity:0.35;}
  70%{opacity:0.12;}
  100%{transform:translate(-50%,-50%)scale(4.5);opacity:0;}
}
.badge-ripple-emerald{position:relative;isolation:isolate;}
.badge-ripple-emerald::before,.badge-ripple-emerald::after{
  content:"";position:absolute;left:50%;top:50%;
  width:160%;height:160%;border-radius:9999px;
  background:radial-gradient(closest-side,rgba(16,185,129,.35),rgba(16,185,129,0));
  transform:translate(-50%,-50%)scale(0.6);
  animation:badgeTintEmerald 2.4s ease-out infinite;pointer-events:none;z-index:0;
}
.badge-ripple-emerald::after{
  animation-delay:1.2s;
  background:radial-gradient(closest-side,rgba(16,185,129,.25),rgba(16,185,129,0));
}
.badge-ripple-emerald>*{position:relative;z-index:1;}

/* Compact legal links */
.footer-legal-link {
  position:relative; padding-bottom:2px; color:rgba(255,255,255,.75);
  transition:color .2s ease;
}
.footer-legal-link::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  height:1px; transform:scaleX(0); transform-origin:left;
  background:linear-gradient(90deg, rgba(96,165,250,.9), rgba(192,132,252,.9), rgba(244,114,182,.9));
  transition:transform .28s cubic-bezier(.22,1,.36,1); opacity:.9;
}
.footer-legal-link:hover { color:#fff; }
.footer-legal-link:hover::after { transform:scaleX(1); }

/* Admin CTA styling (glass + gradient ring) */
.admin-card { backdrop-filter: saturate(1.2) blur(0px); }
.admin-cta {
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border-color: rgba(255,255,255,.18);
  border-width: 1px;
  line-height: 1;
  box-shadow: 0 2px 8px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.06);
  position: relative;
  overflow: hidden;
}
.admin-cta::before {
  content: "";
  position: absolute; inset: -1px;
  border-radius: 9999px;
  padding: 1px;
  background: linear-gradient(90deg, rgba(34,211,238,.6), rgba(99,102,241,.6), rgba(139,92,246,.6));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  opacity: .55;
}
.admin-cta:hover { transform: translateY(-1px); }
.admin-cta:hover::before { opacity: .85; }
.admin-cta i { opacity: .9; }

/* Back to Top button */
.back-to-top { z-index: 40; }
.back-to-top .btn-surface{
  display:inline-flex; align-items:center; justify-content:center;
  width:40px; height:40px; border-radius:9999px;
  backdrop-filter: blur(6px);
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 4px 18px rgba(0,0,0,.35);
}
.back-to-top i { stroke-width:2; color: rgba(255,255,255,.9); }
.back-to-top.show { opacity: 1 !important; transform: translateY(0) scale(1); }
.back-to-top.hide { opacity: 0 !important; transform: translateY(8px) scale(.98); }

/* Icons */
[class*="bg-"] i { stroke-width:1.8; }

/* Accessibility */
@media (prefers-reduced-motion: reduce){
  .animate-gradient,
  .animate-liveDotWater,
  .animate-liveDotWater::before,
  .animate-liveDotWater::after,
  .badge-ripple-emerald::before,
  .badge-ripple-emerald::after,
  .pf-admin-icon,
  .shimmer-random::after { animation:none !important; }
  .back-to-top { transition: none !important; }
}
</style>

<!-- ================= END FOOTER WITH FEEDBACK + ROLES MODAL ================= -->
