<!-- ================= PERSONFINDER PREMIUM FOOTER (FIXED) ================= -->

<!-- ===== FEEDBACK SECTION ===== -->
<section class="pf-feedback-section">
  <div class="pf-feedback-bg" aria-hidden="true"></div>

  <div class="pf-feedback-container">
    <header class="pf-feedback-header">
      <h2>Help Us Improve PersonFinder</h2>
      <p>
        Your feedback helps us improve accuracy, usability, and the impact of our AI-driven search system.
      </p>
    </header>

    <div class="pf-feedback-card" role="region" aria-labelledby="feedback-heading">
      <form id="feedbackForm" class="pf-feedback-form" novalidate>
        <div class="pf-feedback-grid">
          <input
            id="feedbackName"
            name="name"
            type="text"
            placeholder="Your name (optional)"
            class="pf-input"
            autocomplete="name"
          />
          <input
            id="feedbackEmail"
            name="email"
            type="email"
            required
            placeholder="Email address *"
            class="pf-input"
            autocomplete="email"
          />
        </div>

        <select id="feedbackRating" name="rating" required class="pf-input">
          <option value="">Rate your experience *</option>
          <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
          <option value="4">⭐⭐⭐⭐ Good</option>
          <option value="3">⭐⭐⭐ Average</option>
          <option value="2">⭐⭐ Poor</option>
          <option value="1">⭐ Very Poor</option>
        </select>

        <textarea
          id="feedbackMessage"
          name="message"
          rows="4"
          required
          placeholder="Tell us what worked well and what could be improved…"
          class="pf-input pf-textarea"
        ></textarea>

        <div class="pf-feedback-actions">
          <button type="submit" class="pf-feedback-submit">
            Submit Feedback
            <i data-lucide="send" aria-hidden="true"></i>
          </button>

          <p id="feedbackSuccess" class="pf-feedback-success pf-hidden" role="status" aria-live="polite">
            ✅ Thank you! Your feedback has been submitted.
          </p>
          <p id="feedbackError" class="pf-feedback-error pf-hidden" role="alert" aria-live="assertive">
            ❌ Something went wrong. Please try again.
          </p>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Divider -->
<div class="pf-footer-divider" aria-hidden="true"></div>

<!-- ===== MAIN FOOTER ===== -->
<footer class="pf-footer" role="contentinfo">
  <div class="pf-footer-container">

    <!-- Brand -->
    <div class="pf-footer-brand">
      <a href="{{ url_for('home') }}" class="pf-footer-logo" aria-label="PersonFinder home">
        <img
          src="{{ url_for('static', filename='images/elderly.jpeg') }}"
          alt="PersonFinder logo"
        />
        <div>
          <span class="pf-footer-title">PersonFinder</span>
          <span class="pf-footer-tagline">Reuniting Loved Ones</span>
        </div>
      </a>
      <p class="pf-footer-description">
        An AI-powered platform designed to help communities locate and reunite missing persons
        with dignity, speed, and ethical responsibility.
      </p>
    </div>

    <!-- Navigation -->
    <nav class="pf-footer-nav" aria-label="Footer navigation">
      <div>
        <h4>Explore</h4>
        <ul>
          <li><a href="{{ url_for('home') }}">Home</a></li>
          <li><a href="{{ url_for('register') }}">Register</a></li>
          <li><a href="{{ url_for('search') }}">Search</a></li>
        </ul>
      </div>

      <div>
        <h4>Project</h4>
        <ul>
          <li><a href="{{ url_for('developers') }}">Developers</a></li>
          <li><a href="{{ url_for('donate_page') }}">Donate</a></li>
          <li><a href="{{ url_for('about') }}">About</a></li>
        </ul>
      </div>
    </nav>

    <!-- Mission -->
    <div class="pf-footer-mission">
      <h4>Our Mission</h4>
      <p>
        Every search matters. We design systems that prioritize privacy,
        fairness, and timely results — because one match can change a life.
      </p>

      <div class="pf-footer-badges" aria-hidden="true">
        <span><i data-lucide="shield-check"></i> Secure</span>
        <span><i data-lucide="cpu"></i> AI Verified</span>
        <span><i data-lucide="heart-handshake"></i> Human-First</span>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="pf-footer-bottom">
    <div>
      <p>
        © {{ current_year }} PersonFinder • v{{ app_version }}
      </p>
      <nav aria-label="Legal">
        <a href="{{ url_for('privacy_policy') }}">Privacy Policy</a>
        <span>•</span>
        <a href="{{ url_for('terms') }}">Terms of Service</a>
      </nav>
    </div>

    <p class="pf-footer-hashtag">#HumanFirstAI</p>
  </div>
</footer>

<!-- ===== ICONS (deferred + idle-safe) ===== -->
<script defer src="https://unpkg.com/lucide@latest/dist/lucide.umd.js"></script>
<script>
  (function () {
    // Use requestIdleCallback when available, otherwise fall back to load event
    function attachIcons() {
      try {
        if (window.lucide) window.lucide.createIcons();
      } catch (e) {
        // non-fatal: log in DEV only
        if (typeof console !== 'undefined') console.debug('lucide failed', e);
      }
    }

    if ('requestIdleCallback' in window) {
      requestIdleCallback(attachIcons, { timeout: 1000 });
    } else {
      // If lucide script is deferred, it should be available by 'load' time
      window.addEventListener('load', attachIcons, { passive: true });
    }
  })();
</script>

<!-- ================= STYLES (namespaced + safe) ================= -->
<style>
/* ---------- Safety: ensure footer never overlays header ---------- */
.pf-footer { position: relative; z-index: 0; }

/* ---------- Divider CSS ---------- */
.pf-footer-divider {
  height: 1px;
  margin: 0 auto;
  max-width: 80rem;
  background: rgba(255,255,255,0.18);
  filter: blur(0.6px);
}

/* ---------- Feedback ---------- */
.pf-feedback-section {
  position: relative;
  background: radial-gradient(circle at top, rgba(56,189,248,.12), transparent 55%),
              linear-gradient(to bottom, #020617, #020617);
  color: #fff;
}
.pf-feedback-container {
  max-width: 56rem;
  margin: auto;
  padding: 4rem 1rem;
}
.pf-feedback-header {
  text-align: center;
  margin-bottom: 2rem;
}
.pf-feedback-header h2 {
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  font-weight: 800;
}
.pf-feedback-header p {
  margin-top: .5rem;
  color: rgba(255,255,255,.7);
}
.pf-feedback-card {
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 1.75rem;
  padding: 2rem;
  /* reduced blur to avoid heavy painting */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Grid */
.pf-feedback-grid {
  display: grid;
  gap: 1rem;
}
@media (min-width: 640px) {
  .pf-feedback-grid { grid-template-columns: 1fr 1fr; }
}

/* Inputs */
.pf-input {
  width: 100%;
  padding: .8rem 1rem;
  border-radius: .9rem;
  border: 1px solid rgba(255,255,255,.15);
  background: rgba(2,6,23,.7);
  color: #fff;
}
.pf-input::placeholder { color: rgba(255,255,255,.45); }
.pf-input:focus {
  outline: none;
  border-color: #38bdf8;
  box-shadow: 0 0 0 1.5px rgba(56,189,248,.25);
}
.pf-textarea { resize: vertical; }

/* Feedback Actions */
.pf-feedback-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 1rem;
}
.pf-feedback-submit {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .75rem 1.5rem;
  border-radius: 999px;
  background: #22d3ee;
  color: #020617;
  font-weight: 700;
  border: none;
  cursor: pointer;
}
.pf-feedback-submit:hover { background: #67e8f9; }
.pf-feedback-success { color: #6ee7b7; }
.pf-feedback-error { color: #fca5a5; }

/* Footer hidden utility (namespaced) */
.pf-hidden { display: none !important; }

/* ---------- Footer ---------- */
.pf-footer {
  background: linear-gradient(to bottom, #020617, #020617);
  color: rgba(255,255,255,.85);
}
.pf-footer-container {
  max-width: 80rem;
  margin: auto;
  padding: 3.5rem 1rem;
  display: grid;
  gap: 2.5rem;
}
@media (min-width: 768px) {
  .pf-footer-container {
    grid-template-columns: 1.3fr 1fr 1fr;
  }
}

/* Brand */
.pf-footer-logo {
  display: flex;
  gap: .75rem;
  align-items: center;
}
.pf-footer-logo img {
  width: 42px;
  height: 42px;
  border-radius: .75rem;
}
.pf-footer-title {
  font-weight: 800;
  font-size: 1.2rem;
  background: linear-gradient(
    90deg,
    rgba(96,165,250,0.85),
    rgba(192,132,252,0.85),
    rgba(244,114,182,0.85)
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.pf-footer-tagline {
  display: block;
  font-size: .75rem;
  opacity: .7;
}
.pf-footer-description {
  margin-top: .75rem;
  font-size: .85rem;
  color: rgba(255,255,255,.7);
}

/* Nav */
.pf-footer-nav {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}
.pf-footer-nav h4 {
  font-size: .75rem;
  letter-spacing: .1em;
  text-transform: uppercase;
  margin-bottom: .75rem;
}
.pf-footer-nav a {
  display: block;
  font-size: .9rem;
  margin-bottom: .4rem;
  color: rgba(255,255,255,.8);
}
.pf-footer-nav a:hover { color: #fff; }

/* Mission */
.pf-footer-mission h4 {
  font-size: .95rem;
  font-weight: 700;
}
.pf-footer-mission p {
  font-size: .85rem;
  margin-top: .5rem;
  color: rgba(255,255,255,.7);
}
.pf-footer-badges {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  margin-top: .75rem;
}
.pf-footer-badges span {
  font-size: .7rem;
  padding: .3rem .6rem;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  display: inline-flex;
  align-items: center;
  gap: .3rem;
}

/* Bottom */
.pf-footer-bottom {
  border-top: 1px solid rgba(255,255,255,.1);
  padding: 1.25rem 1rem;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: .75rem;
  font-size: .75rem;
}
.pf-footer-bottom nav a {
  margin-right: .5rem;
  color: rgba(255,255,255,.7);
}
.pf-footer-hashtag {
  color: rgba(255,255,255,.6);
}
</style>
