{% extends "base.html" %}

{% block title %}Register - PersonFinder{% endblock %}

{% block content %}
<main class="min-h-screen flex justify-center px-4 sm:px-6 lg:px-8 pt-10 bg-blue-600 text-white">

  <div class="w-full max-w-2xl bg-white/10 backdrop-blur-lg rounded-2xl p-6 sm:p-8 shadow-xl space-y-6 animate-fade-in">

    <!-- Heading -->
    <h2 class="text-3xl font-bold text-center mb-2 opacity-0 animate-slide-up-delay-head">
      Register a Missing Person
    </h2>

    <!-- Description -->
    <p class="text-center text-gray-200 text-lg opacity-0 animate-slide-up-delay-desc mb-4">
      Please fill in the details to help trace the missing person.
    </p>

    <!-- Form -->
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
      {{ form.hidden_tag() }}

      <!-- Full Name -->
      <div class="fade-slide" style="animation-delay:0.2s">
        <label class="block font-semibold mb-2">Full Name <span class="text-red-400">*</span></label>
        {{ form.full_name(class="w-full px-4 py-2 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300", placeholder="e.g., John Doe") }}
        {% for error in form.full_name.errors %}
          <span class="text-red-400 text-sm">{{ error }}</span>
        {% endfor %}
      </div>

      <!-- Guardian Name -->
      <div class="fade-slide" style="animation-delay:0.3s">
        <label class="block font-semibold mb-2">Guardian Name <span class="text-red-400">*</span></label>
        {{ form.guardian_name(class="w-full px-4 py-2 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300", placeholder="e.g., Jane Doe") }}
        {% for error in form.guardian_name.errors %}
          <span class="text-red-400 text-sm">{{ error }}</span>
        {% endfor %}
      </div>

      <!-- Age -->
      <div class="fade-slide" style="animation-delay:0.4s">
        <label class="block font-semibold mb-2">Age <span class="text-red-400">*</span></label>
        {{ form.age(class="w-full px-4 py-2 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300", placeholder="e.g., 25") }}
        {% for error in form.age.errors %}
          <span class="text-red-400 text-sm">{{ error }}</span>
        {% endfor %}
      </div>

      <!-- Phone Number -->
      <div class="fade-slide" style="animation-delay:0.5s">
        <label class="block font-semibold mb-2">Phone Number <span class="text-red-400">*</span></label>
        {{ form.phone_number(class="w-full px-4 py-2 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300", placeholder="e.g., 9876543210") }}
        {% for error in form.phone_number.errors %}
          <span class="text-red-400 text-sm">{{ error }}</span>
        {% endfor %}
      </div>

      <!-- Address -->
      <div class="fade-slide" style="animation-delay:0.6s">
        <label class="block font-semibold mb-2">Address <span class="text-red-400">*</span></label>
        {{ form.address(class="w-full px-4 py-3 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300", placeholder="e.g., 123 Main St, City") }}
        {% for error in form.address.errors %}
          <span class="text-red-400 text-sm">{{ error }}</span>
        {% endfor %}
      </div>

      <!-- Last Seen (Place + Date) -->
      <div class="fade-slide" style="animation-delay:0.7s">
        <label class="block font-semibold mb-2">Last Seen <span class="text-red-400">*</span></label>
        <input type="text" name="last_seen" placeholder="e.g., City, YYYY-MM-DD"
               class="w-full px-4 py-2 rounded-xl bg-white/20 text-white placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-300"/>
      </div>

      <!-- Choose File Button & Preview -->
      <div class="fade-slide flex flex-col items-center mt-4" style="animation-delay:0.8s">
        <input type="file" id="photo" name="photo" accept="image/*" onchange="previewPhoto(event)"
          class="hidden"/>
        <label for="photo"
               class="cursor-pointer px-6 py-2 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-indigo-600 hover:to-blue-500 text-white font-semibold shadow-lg transition transform hover:scale-105">
          Choose File *
        </label>

        <div id="photo_preview_container" class="mt-4 hidden relative">
          <img id="photo_preview" src="#" alt="Photo Preview" class="max-h-56 rounded-xl shadow-lg border border-gray-500"/>
          <button type="button" onclick="clearPhoto()" 
                  class="absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-xl shadow-md transition transform hover:scale-105">
            âœ•
          </button>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="mt-6">
        {{ form.submit(class="w-full px-6 py-4 rounded-2xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-pink-600 hover:to-purple-600 text-white font-semibold text-lg shadow-lg transform transition hover:scale-105 duration-300") }}
      </div>

    </form>
  </div>
</main>

<!-- Animations -->
<style>
  .fade-slide { opacity: 0; transform: translateY(20px); animation: fadeSlide 0.6s forwards; }
  @keyframes fadeSlide { to { opacity: 1; transform: translateY(0); } }
  .animate-fade-in { animation: fadeIn 1s ease-in-out; }
  @keyframes fadeIn { from { opacity:0 } to { opacity:1 } }

  .animate-slide-up-delay-head { animation: slideUpHead 0.8s ease forwards; animation-delay:0.2s; }
  @keyframes slideUpHead { 0% { opacity:0; transform:translateY(15px); } 100% { opacity:1; transform:translateY(0); } }

  .animate-slide-up-delay-desc { animation: slideUpDesc 0.8s ease forwards; animation-delay:0.3s; }
  @keyframes slideUpDesc { 0% { opacity:0; transform:translateY(15px); } 100% { opacity:1; transform:translateY(0); } }
</style>

<script>
  function previewPhoto(event) {
    const previewContainer = document.getElementById('photo_preview_container');
    const preview = document.getElementById('photo_preview');
    const file = event.target.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        previewContainer.classList.remove('hidden');
      }
      reader.readAsDataURL(file);
    }
  }

  function clearPhoto() {
    document.getElementById('photo').value = "";
    document.getElementById('photo_preview_container').classList.add('hidden');
  }
</script>
{% endblock %}
