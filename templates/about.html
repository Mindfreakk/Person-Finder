{% extends "base.html" %}

{% block title %}About PersonFinder - PersonFinder{% endblock %}

{% block content %}
<div class="flex flex-col items-center w-full px-4 sm:px-6 lg:px-8 py-8 space-y-6 animate-page-enter mt-20">

  <!-- Heading -->
  <header class="mb-6 text-center">
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold text-white">
      About 
      <span class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent animate-gradient">
        PersonFinder
      </span>
    </h1>
    <p class="mx-auto text-[clamp(0.8rem,2.2vw,1rem)] leading-relaxed max-w-2xl mt-3 sm:mt-4 px-2 text-center">
      PersonFinder is a platform designed to help 
      <span class="text-green-400 font-semibold">families and communities</span> 
      reunite with their lost or elderly loved ones 
      <span class="text-purple-300 font-semibold">quickly, safely, and efficiently</span>.
    </p>
  </header>

  <!-- Divider Between Heading and Accordion -->
  <div class="relative w-full flex justify-center my-12 sm:my-16">
    <div class="h-px w-3/4 sm:w-2/3 lg:w-1/2 bg-gradient-to-r from-transparent via-gray-400/40 to-transparent"></div>
    <span class="absolute -top-3 bg-blue-900 text-gray-200 text-xs sm:text-sm px-3 py-1 rounded-full shadow-md tracking-wide">
      Learn More
    </span>
  </div>

  <!-- Accordion -->
  <div id="about-accordion" class="space-y-3">

    {% set sections = [
      {'title': '1. Mission', 'content': '<p>Our mission is to reunite families and loved ones safely and efficiently. PersonFinder is built with empathy and social responsibility at its core, ensuring that every missing person report is handled with care and speed.</p>'},
      {'title': '2. Features', 'content': '<ul class="list-disc pl-5 space-y-2"><li>User-friendly registration and search for missing persons.</li><li>Advanced matching technology for faster identification.</li><li>Community support with donations and leads.</li><li>Secure data handling and privacy protection.</li></ul>'},
      {'title': '3. Security & Privacy', 'content': '<p>All personal information, images, and reports are encrypted and stored securely. PersonFinder prioritizes confidentiality while maintaining efficiency in searches.</p>'},
      {'title': '4. Community Engagement', 'content': '<p>PersonFinder empowers communities to actively participate in locating missing persons. Users can share reports, provide leads, and support ongoing search initiatives.</p>'},
      {'title': '5. Accessibility & Responsiveness', 'content': '<p>The platform is fully responsive and accessible across devices, whether on desktop or mobile, ensuring ease of use for everyone.</p>'},
      {'title': '6. Impact', 'content': '<p>PersonFinder is more than an app; it is a lifeline for families in distress. By combining technology with compassion, the platform helps create safer communities and quicker reunions.</p>'}
    ] %}

    {% for section in sections %}
    <article class="accordion-item bg-transparent rounded-lg" id="section-{{ loop.index }}">
      <header class="w-full">
        <button
          type="button"
          id="accordion-header-{{ loop.index }}"
          class="accordion-header group flex items-start justify-between w-full px-4 py-3 sm:px-5 sm:py-4 text-left rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
          aria-expanded="false"
          aria-controls="section-content-{{ loop.index }}">
          <div class="flex-1 pr-4">
            <h3 class="text-gray-300 font-semibold text-sm sm:text-base">{{ section.title|safe }}</h3>
          </div>

          <svg class="accordion-icon w-5 h-5 text-gray-400 transform transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
      </header>

      <div id="section-content-{{ loop.index }}" class="accordion-content max-h-0 overflow-hidden transition-[max-height] duration-300" role="region" aria-labelledby="accordion-header-{{ loop.index }}">
        <div class="accordion-inner px-4 pb-5 pt-3 sm:px-5 sm:pt-4 text-gray-400 text-xs sm:text-sm leading-relaxed">
          {{ section.content|safe }}
        </div>
      </div>
    </article>
    {% endfor %}
  </div>

  <!-- About App Divider -->
<div class="relative w-full flex justify-center my-16 sm:my-20">
  <div class="h-px w-3/4 sm:w-2/3 lg:w-1/2 bg-gradient-to-r from-transparent via-gray-400/40 to-transparent"></div>
  <span class="absolute -top-3 bg-blue-900 text-gray-200 text-xs sm:text-sm px-3 py-1 rounded-full shadow-md tracking-wide">
    Did You Know?
  </span>
</div>

<!-- Info Box -->
<div class="info-box bg-indigo-900/40 border border-indigo-500/30 rounded-xl p-6 shadow-lg 
            max-w-2xl mx-auto text-center mt-12 sm:mt-16 lg:mt-20 mb-20 animate-slide-in animate-pulse-slow">
  <p class="text-xs sm:text-sm leading-relaxed text-gray-200">
    <span class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent animate-gradient">
        PersonFinder
      </span> was designed with a mission to 
    <span class="text-blue-300 font-semibold">bring families closer</span>.  
    Combining <span class="text-purple-300 font-semibold">AI innovation</span> and 
    <span class="text-green-300 font-semibold">privacy-first design</span>, it delivers a secure, reliable, and human-centered experience.
  </p>
</div>

<!-- Inline Styles & Script -->
<style>
  .accordion-content { transition: max-height 340ms ease; }
  .accordion-icon.rotate-180 { transform: rotate(180deg); }
  .accordion-inner { will-change: transform, opacity; }

  @keyframes slide-up { 
    0% { opacity: 0; transform: translateY(1.5rem); } 
    100% { opacity: 1; transform: translateY(0); } 
  }
  .accordion-item { animation: slide-up 0.5s forwards; }

  .accordion-header:hover { background-color: rgba(255,255,255,0.02); }
  .accordion-header:focus { box-shadow: 0 0 0 4px rgba(124,58,237,0.08); outline: none; border-radius: .5rem; }

  @keyframes pulse-slow {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.95; transform: scale(1.01); }
  }
  .animate-pulse-slow { animation: pulse-slow 4s ease-in-out infinite; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const headers = Array.from(document.querySelectorAll('.accordion-header'));
  const contents = Array.from(document.querySelectorAll('.accordion-content'));

  contents.forEach(c => { c.style.maxHeight = '0px'; c.classList.remove('open'); });

  function closePanel(header, content) {
    content.style.maxHeight = '0px';
    content.classList.remove('open');
    header.setAttribute('aria-expanded', 'false');
    const ico = header.querySelector('.accordion-icon');
    if (ico) ico.classList.remove('rotate-180');
  }

  function openPanel(header, content) {
    const inner = content.querySelector('.accordion-inner') || content;
    content.style.maxHeight = inner.scrollHeight + 'px';
    content.classList.add('open');
    header.setAttribute('aria-expanded', 'true');
    const ico = header.querySelector('.accordion-icon');
    if (ico) ico.classList.add('rotate-180');
  }

  function closeAll() {
    headers.forEach(h => {
      const parent = h.closest('.accordion-item');
      const c = parent.querySelector('.accordion-content');
      closePanel(h, c);
    });
  }

  headers.forEach(header => {
    header.addEventListener('click', function () {
      const parent = header.closest('.accordion-item');
      const content = parent.querySelector('.accordion-content');
      const isOpen = content.classList.contains('open');

      if (isOpen) closePanel(header, content);
      else { 
        closeAll(); 
        openPanel(header, content); 
        if (window.innerWidth < 640) 
          setTimeout(() => header.scrollIntoView({ behavior: 'smooth', block: 'start' }), 140); 
      }
    });

    header.addEventListener('keydown', function (ev) {
      if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); header.click(); }
    });
  });

  let resizeTimer = null;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      contents.forEach(c => { 
        if (c.classList.contains('open')) { 
          const inner = c.querySelector('.accordion-inner') || c; 
          c.style.maxHeight = inner.scrollHeight + 'px'; 
        } 
      });
    }, 120);
  });
});
</script>
{% endblock %}
